<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="自分用ポータルページ。メモ、リンク集、プロフィールなど。" />
  <meta name="author" content="Your Name" />
  <title>rT_Container</title>

  <!-- SNSシェア対策 -->
  <meta property="og:title" content="My Personal Page" />
  <meta property="og:description" content="シンプルでミニマルな自分用ポータルサイト。" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://example.com/og-image.png" />
  <meta property="og:url" content="https://example.com/" />

  <!-- アイコンなど -->
  <link rel="icon" href="favicon.ico" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />

  <!-- model-viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <!-- スタイル -->
  <style>
    /* はみ出し防止の基本 */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { overflow-x: hidden; }

    .bg-image {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      z-index: -2;
      pointer-events: none;
      padding: 2rem;
        /* 回転アニメーション */
      animation: spin 60s linear infinite; /* 60秒で1回転、永遠に回る */
      transform-origin: center center;     /* 画像の中心を基準に回転 */
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    /* .bg-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: -1;
      pointer-events: none;
    } */

    body {
      background-color: #000;
      color: #fff;
      font-family: "HackGen Console NF", monospace;
      margin: 0;
      line-height: 1.6;
      display: grid;
      min-height: 100svh;
    }

    .page{
      width: 100%;
      margin: auto;
      padding: 2rem;
      text-align: center;
    }

    /* PCではheaderは固定のまま */
    header {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1;
    }

    header ul {
      display: flex;
      justify-content: right; /* 既存の見た目維持 */
    }

    .hero {
      width: 100%;
      margin-inline: auto;
    }

    .hero img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 8px;
    }

    /* ハンバーガー（PCでは非表示） */
    .nav-toggle {
      display: none;
      position: absolute;
      top: 8px;
      right: 8px;
      border: 0;
      background: rgba(0,0,0,0.5);
      color: #fff;
      padding: 8px 10px;
      border-radius: 8px;
      font-size: 1rem;
      line-height: 1;
      cursor: pointer;
    }
    .nav-toggle:focus { outline: 2px solid #fff; outline-offset: 2px; }

    main {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    section {
      /* width: 100%; */
      margin: 1rem;
    }

    /* 中央配置を維持しつつ、文面だけ左揃え */
    section ul,
    .profile-section .profile-list,
    section p,
    .profile-section p {
      display: flex;
      flex-wrap: wrap;
      text-align: left;
      /* max-width: 100%; */
    }

    ul {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    li {
      margin: 0.5rem;
      background-color: rgb(0, 128, 255);
      border-radius: 1rem;
      padding: 0.25rem;
    }

    a {
      
      color: #fff;
      
      
      /* line-height: 2rem; */
      text-decoration: none;
    }
    a:hover { text-decoration: underline; }

    .program { justify-content: center; }

    .album {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }

    .album img {
      width: 200px;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
    }

    .model-viewer-box {
      width: 200px;
      height: 200px;
      border-radius: 8px;
    }

    /* <model-viewer> 要素を枠にフィット */
    model-viewer{
      width: 100%;
      height: 100%;
      border-radius: 8px;
    }

    .video-section {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      justify-content: center;
    }

    .video-container {
      width: 200px;
      height: 200px;
      position: relative;
      border-radius: 8px;
      overflow: hidden;
    }

    .video{
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      border: none;
      border-radius: 8px;
    }

    .unmute-btn {
      position: absolute;
      bottom: 8px;
      right: 8px;
      background: rgba(0,0,0,0.5);
      color: #fff;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8rem;
    }
    .unmute-btn:hover { background: rgba(0,0,0,0.5); }

    /* .profile-section { margin-inline: auto; } */
    .profile-list { justify-content: center; }

    .profile-list li {
      background-color: rgb(128, 128, 128);
      /* padding: 0.5rem;
      border-radius: 1rem; */
    }

    /* PCではfooterは固定のまま */
    footer {
      position: fixed;
      right: 0;
      bottom: 0;
      left: 0;
      background: rgba(0,0,0,0.5);
      text-align: right;
      padding: 0.5rem;
    }

    footer a {
      background-color: rgb(0, 128, 255);
      padding: 0.1rem 0.5rem;
      border-radius: 1rem;
    }

    /* ===== スマホ用表示調整（768px以下） ===== */
    @media (max-width: 768px) {
      /* ヘッダー/フッターを通常フローへ（固定解除） */
      header { position: relative; top: auto; right: auto; left: auto; }
      footer { position: static; }

      /* ハンバーガー表示、ナビをドロップダウン化（右上） */
      .nav-toggle {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
      }
      header ul {
        display: none;                    /* 既定は閉じる */
        position: absolute;
        top: calc(100% + 6px);
        right: 8px;
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.5rem;
        margin: 0;
        background: rgba(0,0,0,0.5);
        border-radius: 8px;
        min-width: 160px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.5);
        z-index: 1;
      }
      header.nav-open ul { display: flex; }

      /* ヘッダーの高さ分の余白は不要（固定でないため） */
      main { padding-top: 0; }

      /* フッター small を2行表示 */
      footer small { display: block; line-height: 1.4; }
    }
  </style>
</head>
<body>
  <img src="images/container.png" alt="rT_Container" class="bg-image">
  <div class="bg-overlay"></div>
  <div class="page">
    <header class="hero">
      <button class="nav-toggle" id="navToggle" aria-controls="globalNav" aria-expanded="false" aria-label="メニュー">☰</button>
      <ul id="globalNav">
        <li><a href="https://github.com/" rel="noopener noreferrer">🔗GitHub</a></li>
        <li><a href="https://chat.openai.com/" rel="noopener noreferrer">🔗ChatGPT</a></li>
        <li><a href="https://google.co.jp/" rel="noopener noreferrer">🔗Google</a></li>
      </ul>
    </header>
    <main>
      <section>
        <div class="video-section">
          <div class="video-container">
            <video id="gougingVideo" class="video" muted autoplay loop playsinline webkit-playsinline preload="metadata">
              <source src="videos/gouging.mp4" type="video/mp4">
              <source src="videos/gouging.mov" type="video/quicktime">
              お使いのブラウザは動画に対応していません。
            </video>
            <button id="muteToggleBtn" class="unmute-btn" aria-pressed="true" aria-label="音声のオンオフ">🔈</button>
          </div>
          <div class="video-container">
            <video class="video" muted autoplay loop playsinline webkit-playsinline preload="metadata">
              <source src="videos/bucket.mp4" type="video/mp4">
              <source src="videos/bucket.mov" type="video/quicktime">
              お使いのブラウザは動画に対応していません。
            </video>
          </div>
        </div>
      </section>
      <section>
        <div class="album">
          <img src="images/building_berth.JPG" alt="船台" loading="lazy" />
          <img src="images/welding_test.JPG" alt="溶接試験" loading="lazy" />
          <img src="images/bucket.jpg" alt="バケット" loading="lazy" />
          <img src="images/bucket.png" alt="バケットモデル" loading="lazy" />
        </div>
      </section>
      <section>
        <div class="album">
          <div class="model-viewer-box">
            <model-viewer src="models/kleinsche_flache.glb" alt="クラインの壺" camera-controls auto-rotate></model-viewer>
          </div>
          <div class="model-viewer-box">
            <model-viewer src="models/earth.glb" alt="地球儀" camera-controls auto-rotate></model-viewer>
          </div>
          <div class="model-viewer-box">
            <model-viewer src="models/iphone_se2_bumper.glb" alt="iPhoneSE2バンパー" camera-controls auto-rotate></model-viewer>
          </div>
          <div class="model-viewer-box">
            <model-viewer src="models/sakura_vase.glb" alt="一輪挿し" camera-controls auto-rotate></model-viewer>
          </div>
          <div class="model-viewer-box">
            <model-viewer src="models/right_arrow.glb" alt="右矢印→" camera-controls auto-rotate></model-viewer>
          </div>
          <div class="model-viewer-box">
            <model-viewer src="models/hebi.glb" alt="巳年" camera-controls auto-rotate></model-viewer>
          </div>
          <div class="model-viewer-box">
            <model-viewer src="models/ttr.glb" alt="トトロ（スキャンテスト）" camera-controls auto-rotate></model-viewer>
          </div>
        </div>
      </section>
      <section>
        <ul class="program">
          <li><a href="https://github.com/rithub0/test_YOLO" rel="noopener noreferrer">📁画像認識テストプログラム（動作済）</a></li>
          <li><a href="https://github.com/rithub0/freecad_ship_parts" rel="noopener noreferrer">📁CAD製図自動化テストプログラム（工事中）</a></li>
          <li><a href="https://github.com/rithub0/test_dxf_to_step_project" rel="noopener noreferrer">📁DXF-STEPテストプログラム（工事中）</a></li>
          <li><a href="https://cbt.odyssey-com.co.jp/phpexam/php8_2.html" rel="noopener noreferrer">PHP8技術者認定初級試験 9/9</a></li>
        </ul>
      </section>
      <section class="profile-section">
        <ul class="profile-list">
          <li>第一種普通（準中型）自動車運転免許</li>
          <li>第一種衛生管理</li>
          <li>Python3エンジニア認定基礎試験</li>
          <li>Webクリエイター能力認定試験エキスパート</li>
          <li>施設警備業務検定２級</li>
          <li>漢検２級</li>
          <li>技能講習修了：フォークリフト運転・玉掛け・ガス溶接</li>
          <li>特別教育修了：クレーン（5t未満）・アーク溶接</li>
          <li>溶接技能：NK / MW・SW / CS・SU / Z</li>
        </ul>
      </section>
    </main>
    <footer>
      <small><a href="https://x.com/3drtec" target="_blank" rel="noopener noreferrer">📩：X（連絡用）@3drtec</a></small>
      <small>&copy; 2025 Ryota Tanaka</small>
    </footer>
  </div>

  <script>
    (function () {
      const onReady = (fn) => {
        if (document.readyState === 'complete' || document.readyState === 'interactive') fn();
        else document.addEventListener('DOMContentLoaded', fn, { once: true });
      };

      onReady(() => {
        /* ======== 動画の初期化（既存） ======== */
        const videos = Array.from(document.querySelectorAll('video.video'));

        const prime = (v) => {
          v.muted = true;          // 自動再生の必須条件
          v.defaultMuted = true;   // iOS対策
          v.loop = true;
          v.autoplay = true;
          v.setAttribute('playsinline', '');
          v.setAttribute('webkit-playsinline', '');
          if (!v.hasAttribute('preload')) v.setAttribute('preload', 'auto');
        };

        const tryPlay = (v) => v.play().catch(() => {});

        videos.forEach(v => {
          prime(v);
          if (v.readyState >= 2) tryPlay(v);
          else v.addEventListener('canplay', () => tryPlay(v), { once: true });
        });

        const kickAll = () => videos.forEach(v => { if (v.paused) tryPlay(v); });
        document.addEventListener('pointerdown', kickAll, { once: true });
        document.addEventListener('visibilitychange', () => { if (!document.hidden) kickAll(); });

        const v = document.getElementById('gougingVideo');
        const btn = document.getElementById('muteToggleBtn');
        if (v && btn) {
          const syncLabel = () => {
            const isMuted = v.muted || v.volume === 0;
            btn.textContent = isMuted ? '🔇' : '🔈';
            btn.setAttribute('aria-pressed', String(!isMuted));
          };
          btn.addEventListener('click', async () => {
            v.muted = !v.muted;
            if (!v.muted) {
              v.volume = 1.0;
              try { await v.play(); } catch (_) {}
            }
            syncLabel();
          });
          v.addEventListener('volumechange', syncLabel);
          v.addEventListener('loadeddata', syncLabel);
          syncLabel();
        }

        /* ======== ハンバーガー開閉（追記） ======== */
        const headerEl = document.querySelector('header.hero');
        const navToggle = document.getElementById('navToggle');
        const nav = document.getElementById('globalNav');

        if (headerEl && navToggle && nav) {
          const closeMenu = () => {
            headerEl.classList.remove('nav-open');
            navToggle.setAttribute('aria-expanded', 'false');
          };
          const toggleMenu = () => {
            const open = headerEl.classList.toggle('nav-open');
            navToggle.setAttribute('aria-expanded', String(open));
          };

          // ボタンで開閉
          navToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            toggleMenu();
          });

          // メニュー内のリンクを押したら閉じる
          nav.addEventListener('click', (e) => {
            const t = e.target;
            if (t && t.tagName && t.tagName.toLowerCase() === 'a') {
              closeMenu();
            }
          });

          // ヘッダー外クリックで閉じる
          document.addEventListener('click', (e) => {
            if (!headerEl.contains(e.target)) closeMenu();
          });

          // Escapeキーで閉じる
          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeMenu();
          });

          // 画面幅が広がったら状態リセット（PC表示で開きっぱなし防止）
          const mql = window.matchMedia('(max-width: 768px)');
          const resetIfPC = () => { if (!mql.matches) closeMenu(); };
          if (mql.addEventListener) mql.addEventListener('change', resetIfPC);
          else mql.addListener(resetIfPC); // 古いブラウザ対策
        }
      });
    })();
  </script>
</body>
</html>
